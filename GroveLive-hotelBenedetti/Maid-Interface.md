# Maid Interface

> **Relevant source files**
> * [assets/css/StyleMucama.css](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/assets/css/StyleMucama.css)
> * [assets/js/mucama.js](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/assets/js/mucama.js)
> * [controllers/CheckoutController.php](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/controllers/CheckoutController.php)

## Purpose and Scope

This document describes the housekeeping staff interface (`mucama`) in the Hotel Benedetti system. The Maid Interface allows housekeeping employees to view cleaning notifications and update room status after cleaning tasks are completed. This interface is the final step in the room lifecycle that transitions rooms from "en limpieza" (in cleaning) back to "disponible" (available) status.

For information about the preceding checkout process that creates cleaning notifications, see [Check-out and Payment Process](/GroveLive/hotelBenedetti/4.3-check-out-and-payment-process). For details on the complete room status management workflow, see [Room Cleaning and Status Management](/GroveLive/hotelBenedetti/4.4-room-cleaning-and-status-management).

---

## Interface Overview

The Maid Interface serves housekeeping staff with two primary functions:

1. **Notification Management** - View and acknowledge cleaning task notifications
2. **Room Status Updates** - Mark rooms as cleaned/available after completing housekeeping tasks

The interface operates as a read-update system where maids consume notifications generated by the checkout process and publish room status updates back to the system.

**Sources:** [assets/css/StyleMucama.css L1-L281](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/assets/css/StyleMucama.css#L1-L281)

 [assets/js/mucama.js L1-L106](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/assets/js/mucama.js#L1-L106)

---

## System Architecture

The Maid Interface follows the standard three-tier architecture used throughout the Hotel Benedetti system:

```

```

**Sources:** [assets/js/mucama.js L1-L106](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/assets/js/mucama.js#L1-L106)

 [assets/css/StyleMucama.css L1-L281](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/assets/css/StyleMucama.css#L1-L281)

---

## Page Structure and Components

The Maid Interface consists of two main sections rendered in the HTML:

### Header Section

The header contains branding and navigation elements:

* Hotel logo display
* Hotel name heading
* Navigation menu with purple accent links

**CSS Implementation:**

* Background color: `#2c2f33`
* Logo max-width: `150px`
* Navigation links: `#9b59b6` (purple accent)
* Hover state: `#8e44ad` with `#36393f` background

**Sources:** [assets/css/StyleMucama.css L40-L83](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/assets/css/StyleMucama.css#L40-L83)

### Notifications Section

Displays cleaning task notifications created after guest checkout:

| Component | CSS Selector | Styling |
| --- | --- | --- |
| Container | `#notifications-section` | `background: #2c2f33`, `border-radius: 8px` |
| Individual Notification | `.notification` | `background: #36393f`, `padding: 15px` |
| Notification Text | `.notification p` | `color: #b0b3b8` |
| Mark as Read Button | `.notification button.mark-as-read` | `background: #9b59b6`, `border-radius: 20px` |

**Sources:** [assets/css/StyleMucama.css L111-L143](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/assets/css/StyleMucama.css#L111-L143)

### Rooms Section

Displays a table of rooms requiring cleaning with action buttons:

| Component | CSS Selector | Styling |
| --- | --- | --- |
| Container | `#rooms-section` | `background: #2c2f33`, `border-radius: 8px` |
| Refresh Button | `#refresh-rooms-button` | `background: #9b59b6`, `border-radius: 20px` |
| Table | `#room-list table` | `background: #36393f`, `border-collapse` |
| Table Headers | `#room-list th` | `background: #9b59b6`, `color: white` |
| Table Rows | `#room-list tr` | Hover: `background: #40444b` |
| Mark as Cleaned Button | `#room-list .mark-as-cleaned` | `background: #9b59b6`, `border-radius: 20px` |

**Sources:** [assets/css/StyleMucama.css L145-L205](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/assets/css/StyleMucama.css#L145-L205)

---

## Visual Design System

The Maid Interface adheres to the Hotel Benedetti dark theme with purple accents established across all interfaces.

### Color Palette

| Color Usage | Hex Value | Application |
| --- | --- | --- |
| Primary Background | `#23272a` | Body background overlay (80% opacity) |
| Secondary Background | `#2c2f33` | Header, sections, footer |
| Tertiary Background | `#36393f` | Notifications, table body |
| Accent/Primary Action | `#9b59b6` | Buttons, links, table headers |
| Accent Hover | `#8e44ad` | Darker purple for hover states |
| Text Primary | `#dcddde` | Headings, main text |
| Text Secondary | `#b0b3b8` | Notification details |

**Sources:** [assets/css/StyleMucama.css L16-L204](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/assets/css/StyleMucama.css#L16-L204)

### Background Image System

The interface uses a layered background approach:

* Base image: `url('../img/fondo.jpg')`
* Fixed attachment with cover sizing
* Dark overlay via `::before` pseudo-element at `rgba(35, 39, 42, 0.8)`
* Content z-index layering: `z-index: 2` for content, `z-index: 1` for overlay

**Sources:** [assets/css/StyleMucama.css L9-L37](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/assets/css/StyleMucama.css#L9-L37)

### Responsive Design

The interface implements mobile-first responsive breakpoints:

**Tablet (768px):**

* Vertical navigation layout
* Reduced font sizes (14px for tables)
* Adjusted padding (8px for table cells)

**Mobile (480px):**

* Logo size reduced to 120px
* Heading font: 20px
* Minimal table cell padding (6px)
* Font size reduced to 12px for tables

**Sources:** [assets/css/StyleMucama.css L216-L281](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/assets/css/StyleMucama.css#L216-L281)

---

## Client-Side Functionality

### Event Binding on Page Load

The `mucama.js` module initializes event listeners when the DOM is ready:

```

```

**Sources:** [assets/js/mucama.js L1-L11](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/assets/js/mucama.js#L1-L11)

### Notification Management Functions

#### markNotificationAsRead()

Handles the notification dismissal workflow:

**Function Flow:**

1. Extract notification ID from `data-id` attribute on `.notification` element
2. Create `URLSearchParams` with `action: "markNotificationAsRead"` and `notificationId`
3. POST to `../controllers/NotificacionController.php`
4. Parse JSON response
5. On success: Remove notification DOM element and call `updateNotificationList()`
6. On error: Display SweetAlert2 error dialog

**Sources:** [assets/js/mucama.js L13-L46](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/assets/js/mucama.js#L13-L46)

#### updateNotificationList()

Updates the UI when all notifications are cleared:

* Checks if `#notification-list` container has children
* If empty, displays message: "No tienes notificaciones de habitaciones para limpiar."

**Sources:** [assets/js/mucama.js L48-L53](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/assets/js/mucama.js#L48-L53)

### Room Cleaning Functions

#### markRoomAsCleaned()

Manages the room cleaning confirmation and status update workflow:

```

```

**Implementation Details:**

* Extracts `habitacionId` from `data-habitacion-id` attribute on table row (`<tr>`)
* Uses SweetAlert2 confirmation dialog with custom text
* POSTs to `../controllers/MucamaController.php` with `action: "markAsCleaned"`
* On success: Shows success notification for 1.5 seconds, then reloads page
* On error: Displays error message via SweetAlert2

**Sources:** [assets/js/mucama.js L55-L106](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/assets/js/mucama.js#L55-L106)

---

## Backend Integration

### API Endpoints

The Maid Interface communicates with two backend controllers:

#### NotificacionController.php

**Endpoint:** `../controllers/NotificacionController.php`

**Action:** `markNotificationAsRead`

**Request Parameters:**

```yaml
action: "markNotificationAsRead"
notificationId: {integer}
```

**Response Format:**

```

```

**Sources:** [assets/js/mucama.js L22-L25](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/assets/js/mucama.js#L22-L25)

#### MucamaController.php

**Endpoint:** `../controllers/MucamaController.php`

**Action:** `markAsCleaned`

**Request Parameters:**

```yaml
action: "markAsCleaned"
habitacionId: {integer}
```

**Response Format:**

```

```

**Database Operation:**

* Updates `habitacion2` table
* Sets `estado = 'disponible'` for the specified room

**Sources:** [assets/js/mucama.js L73-L76](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/assets/js/mucama.js#L73-L76)

---

## Notification Creation Workflow

The Maid Interface receives notifications created by the checkout process:

### Checkout-to-Maid Notification Pipeline

```

```

**Implementation in CheckoutController.php:**

1. After successful checkout creation, update room status to "en limpieza" [controllers/CheckoutController.php L72](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/controllers/CheckoutController.php#L72-L72)
2. Query all users where `rol = 'mucama'` [controllers/CheckoutController.php L81-L84](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/controllers/CheckoutController.php#L81-L84)
3. Create notification for each maid with message template [controllers/CheckoutController.php L86-L91](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/controllers/CheckoutController.php#L86-L91)

**Notification Message Format:**

```
"La habitación {habitacion_id} necesita limpieza después del check-out de la reserva (ID: {reservaId})."
```

**Sources:** [controllers/CheckoutController.php L72-L91](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/controllers/CheckoutController.php#L72-L91)

---

## Complete Room Cleaning Workflow

The following diagram traces the complete lifecycle from checkout to room availability:

```

```

**Sources:** [controllers/CheckoutController.php L72-L91](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/controllers/CheckoutController.php#L72-L91)

 [assets/js/mucama.js L55-L106](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/assets/js/mucama.js#L55-L106)

---

## User Interaction Patterns

### Viewing and Dismissing Notifications

**User Steps:**

1. Maid logs in with role `mucama`
2. System displays `#notifications-section` with pending notifications
3. Each notification shows room number and reservation details
4. Maid clicks "Mark as Read" button (`button.mark-as-read`)
5. System removes notification from display
6. If no notifications remain, message appears: "No tienes notificaciones de habitaciones para limpiar."

**Technical Flow:**

* Event: `click` on `.mark-as-read`
* Handler: `markNotificationAsRead()`
* API: `NotificacionController.php` with `action=markNotificationAsRead`
* UI Update: DOM element removal via `notificationDiv.remove()`

**Sources:** [assets/js/mucama.js L3-L5](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/assets/js/mucama.js#L3-L5)

 [assets/js/mucama.js L13-L46](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/assets/js/mucama.js#L13-L46)

### Marking Rooms as Cleaned

**User Steps:**

1. Maid views `#rooms-section` table showing rooms with status "en limpieza"
2. Maid completes physical cleaning of room
3. Maid clicks "Mark as Cleaned" button (`button.mark-as-cleaned`) in room's table row
4. SweetAlert2 confirmation dialog appears: "¿Confirmar limpieza? La habitación será marcada como disponible."
5. Maid clicks "Sí, marcar como limpiada"
6. System updates room status to "disponible"
7. Success message displays for 1.5 seconds
8. Page reloads to show updated room list

**Technical Flow:**

* Event: `click` on `.mark-as-cleaned`
* Handler: `markRoomAsCleaned()`
* Confirmation: `Swal.fire()` with custom message [assets/js/mucama.js L59-L66](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/assets/js/mucama.js#L59-L66)
* API: `MucamaController.php` with `action=markAsCleaned`
* UI Update: `location.reload()` after success

**Sources:** [assets/js/mucama.js L8-L10](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/assets/js/mucama.js#L8-L10)

 [assets/js/mucama.js L55-L106](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/assets/js/mucama.js#L55-L106)

---

## Data Attributes and DOM Structure

The interface relies on specific data attributes for functionality:

### Notification Elements

**Structure:**

```

```

**Key Attribute:**

* `data-id`: Notification ID used in `markNotificationAsRead()` function

**Sources:** [assets/js/mucama.js L14-L15](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/assets/js/mucama.js#L14-L15)

### Room Table Rows

**Structure:**

```

```

**Key Attribute:**

* `data-habitacion-id`: Room ID used in `markRoomAsCleaned()` function

**Sources:** [assets/js/mucama.js L56-L57](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/assets/js/mucama.js#L56-L57)

---

## Error Handling

Both primary functions implement consistent error handling patterns:

### Error Display Pattern

All errors are displayed using SweetAlert2 with this structure:

```

```

### Error Sources

**markNotificationAsRead() errors:**

* API returns `success: false` [assets/js/mucama.js L32-L37](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/assets/js/mucama.js#L32-L37)
* Network/fetch errors [assets/js/mucama.js L39-L45](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/assets/js/mucama.js#L39-L45)

**markRoomAsCleaned() errors:**

* API returns `success: false` [assets/js/mucama.js L90-L95](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/assets/js/mucama.js#L90-L95)
* Network/fetch errors [assets/js/mucama.js L97-L103](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/assets/js/mucama.js#L97-L103)

**Sources:** [assets/js/mucama.js L32-L45](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/assets/js/mucama.js#L32-L45)

 [assets/js/mucama.js L90-L103](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/assets/js/mucama.js#L90-L103)

---

## Success Feedback

### Notification Dismissal Success

When a notification is successfully marked as read:

* DOM element is removed immediately
* No visual confirmation dialog
* UI updates to show remaining notifications or empty state message

**Sources:** [assets/js/mucama.js L28-L31](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/assets/js/mucama.js#L28-L31)

### Room Cleaning Success

When a room is successfully marked as cleaned:

```

```

Features:

* Success icon and message
* Auto-dismiss after 1.5 seconds
* No confirmation button required
* Page reload to refresh room list

**Sources:** [assets/js/mucama.js L80-L88](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/assets/js/mucama.js#L80-L88)

---

## Integration with Other System Components

The Maid Interface integrates with multiple system components:

### Dependencies

| Component | Purpose | Reference |
| --- | --- | --- |
| SweetAlert2 Library | User confirmations and feedback | Used throughout `mucama.js` |
| NotificacionController.php | Notification management | [3.1](/GroveLive/hotelBenedetti/3.1-authentication-system), [6.3](/GroveLive/hotelBenedetti/6.3-notification-system) |
| MucamaController.php | Room status updates | Inferred from API calls |
| CheckoutController.php | Notification creation | [4.3](/GroveLive/hotelBenedetti/4.3-check-out-and-payment-process) |
| Habitacion2 Model | Room entity management | [2.3](/GroveLive/hotelBenedetti/2.3-data-models-and-database-schema) |

**Sources:** [assets/js/mucama.js L32-L105](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/assets/js/mucama.js#L32-L105)

 [controllers/CheckoutController.php L72-L91](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/controllers/CheckoutController.php#L72-L91)

### Data Flow Connections

```

```

**Sources:** [controllers/CheckoutController.php L72-L91](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/controllers/CheckoutController.php#L72-L91)

 [assets/js/mucama.js L1-L106](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/assets/js/mucama.js#L1-L106)

---

## Summary

The Maid Interface provides a streamlined workflow for housekeeping staff to:

1. **Receive cleaning notifications** generated automatically after guest checkout
2. **Manage notification list** by marking items as read
3. **Update room status** from "en limpieza" to "disponible" after cleaning completion
4. **Complete the room lifecycle** enabling rooms to appear in client searches for new bookings

The interface maintains consistency with the Hotel Benedetti design system through dark theming, purple accents, and responsive layouts while providing clear action buttons and real-time feedback through SweetAlert2 dialogs.

**Sources:** [assets/css/StyleMucama.css L1-L281](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/assets/css/StyleMucama.css#L1-L281)

 [assets/js/mucama.js L1-L106](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/assets/js/mucama.js#L1-L106)

 [controllers/CheckoutController.php L72-L91](https://github.com/GroveLive/hotelBenedetti/blob/ebdd0186/controllers/CheckoutController.php#L72-L91)