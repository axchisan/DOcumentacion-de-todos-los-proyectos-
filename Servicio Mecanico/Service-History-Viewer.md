# Service History Viewer

> **Relevant source files**
> * [src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.form](https://github.com/BrayanTirado/Servicio-Mec-nico/blob/b80161f0/src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.form)
> * [src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java](https://github.com/BrayanTirado/Servicio-Mec-nico/blob/b80161f0/src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java)

## Purpose and Scope

The Service History Viewer provides a read-only interface for querying and displaying the complete service history of vehicles in the system. This module allows users to select a vehicle from a dropdown list and view all past services performed on that vehicle, including service ID, date, type, and cost.

For creating new services, see [Creating Services](/BrayanTirado/Servicio-Mec-nico/4.1-creating-services). For vehicle management operations, see [Vehicle CRUD Operations](/BrayanTirado/Servicio-Mec-nico/6.1-vehicle-crud-operations).

**Sources:** [src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java L1-L185](https://github.com/BrayanTirado/Servicio-Mec-nico/blob/b80161f0/src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java#L1-L185)

---

## Component Architecture

The `HistorialServicios` class extends `javax.swing.JInternalFrame` and implements a simple query interface with vehicle selection and tabular display of service records.

```

```

**Diagram: Component structure of HistorialServicios internal frame**

**Sources:** [src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java L19-L44](https://github.com/BrayanTirado/Servicio-Mec-nico/blob/b80161f0/src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java#L19-L44)

---

## Initialization Sequence

The initialization process occurs in two phases: NetBeans-generated component initialization and custom data loading.

### Component Initialization

The `initComponents()` method [src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java L50-L141](https://github.com/BrayanTirado/Servicio-Mec-nico/blob/b80161f0/src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java#L50-L141)

 is auto-generated by NetBeans Form Editor and creates the Swing components with the following properties:

| Component | Type | Properties |
| --- | --- | --- |
| Internal Frame | JInternalFrame | Closable, Iconifiable, Maximizable |
| jPanel1 | JPanel | Background: RGB(204, 204, 255) |
| jLabel1 | JLabel | Font: Comic Sans MS 18pt Bold, Text: "Seleccionar" |
| jComboBox1 | JComboBox | Font: Sylfaen 14pt Italic |
| jButton1 | JButton | Font: Comic Sans MS 14pt Bold, Text: "Buscar", Color: RGB(0, 102, 255) |
| jTable1 | JTable | Initially 4x4 placeholder model |

**Sources:** [src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java L50-L141](https://github.com/BrayanTirado/Servicio-Mec-nico/blob/b80161f0/src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java#L50-L141)

 [src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.form L1-L154](https://github.com/BrayanTirado/Servicio-Mec-nico/blob/b80161f0/src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.form#L1-L154)

### Custom Initialization

The `initializeComponents()` method [src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java L32-L44](https://github.com/BrayanTirado/Servicio-Mec-nico/blob/b80161f0/src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java#L32-L44)

 performs three critical setup tasks:

```

```

**Diagram: Initialization flow showing data loading sequence**

**Sources:** [src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java L27-L44](https://github.com/BrayanTirado/Servicio-Mec-nico/blob/b80161f0/src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java#L27-L44)

---

## Search Workflow

The search workflow is triggered when the user clicks the "Buscar" button, invoking `jButton1ActionPerformed()` [src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java L143-L162](https://github.com/BrayanTirado/Servicio-Mec-nico/blob/b80161f0/src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java#L143-L162)

```

```

**Diagram: Complete search workflow from button click to table update**

**Sources:** [src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java L143-L174](https://github.com/BrayanTirado/Servicio-Mec-nico/blob/b80161f0/src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java#L143-L174)

---

## Data Retrieval Process

The search handler performs three sequential DAO operations:

### Step 1: Retrieve Selected Vehicle

```
String selectedVehicle = (String) jComboBox1.getSelectedItem();
```

The combo box contains user-friendly vehicle identifiers (typically license plates or vehicle descriptions) loaded during initialization.

**Sources:** [src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java L145](https://github.com/BrayanTirado/Servicio-Mec-nico/blob/b80161f0/src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java#L145-L145)

### Step 2: Resolve Vehicle ID

```
int vehicleId = servicioDAO.getVehiculoId(selectedVehicle);
```

This method translates the user-friendly string identifier to the database primary key. Returns `-1` if the vehicle is not found.

**Sources:** [src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java L147](https://github.com/BrayanTirado/Servicio-Mec-nico/blob/b80161f0/src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java#L147-L147)

### Step 3: Fetch Service History

```
List<Servicio> servicios = servicioDAO.getServiciosByVehiculo(vehicleId);
```

This method queries the database for all service records associated with the vehicle ID. The method signature indicates it throws `SQLException`, which is caught and logged using `java.util.logging.Logger` [src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java L152-L153](https://github.com/BrayanTirado/Servicio-Mec-nico/blob/b80161f0/src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java#L152-L153)

**Sources:** [src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java L149-L154](https://github.com/BrayanTirado/Servicio-Mec-nico/blob/b80161f0/src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java#L149-L154)

---

## Table Display Implementation

The `updateTable()` method [src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java L164-L174](https://github.com/BrayanTirado/Servicio-Mec-nico/blob/b80161f0/src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java#L164-L174)

 populates the table with service data.

### Table Structure

The table model is initialized with four columns [src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java L41](https://github.com/BrayanTirado/Servicio-Mec-nico/blob/b80161f0/src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java#L41-L41)

:

| Column Index | Column Name | Data Source | Description |
| --- | --- | --- | --- |
| 0 | ID Servicio | `servicio.getId()` | Database primary key |
| 1 | Fecha | `servicio.getFecha()` | Service date |
| 2 | Tipo | `servicio.getTipo()` | Service type/category |
| 3 | Costo | `servicio.getCosto()` | Service cost (total) |

**Sources:** [src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java L41](https://github.com/BrayanTirado/Servicio-Mec-nico/blob/b80161f0/src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java#L41-L41)

### Table Update Logic

The update process follows this sequence:

1. **Clear existing data**: `tableModel.setRowCount(0)` removes all rows, preserving column headers [src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java L165](https://github.com/BrayanTirado/Servicio-Mec-nico/blob/b80161f0/src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java#L165-L165)
2. **Iterate service list**: For each `Servicio` object in the list [src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java L166](https://github.com/BrayanTirado/Servicio-Mec-nico/blob/b80161f0/src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java#L166-L166)
3. **Add row**: Create an `Object[]` array with four elements and add to table model [src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java L167-L172](https://github.com/BrayanTirado/Servicio-Mec-nico/blob/b80161f0/src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java#L167-L172)

**Note**: The table is read-only for display purposes. No editing functionality is provided in this interface.

**Sources:** [src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java L164-L174](https://github.com/BrayanTirado/Servicio-Mec-nico/blob/b80161f0/src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java#L164-L174)

---

## Error Handling

The implementation includes two explicit error scenarios:

### No Vehicle Selected

When `jComboBox1.getSelectedItem()` returns `null`, an error dialog is displayed:

```
JOptionPane.showMessageDialog(this, 
    "Por favor, seleccione un vehículo.", 
    "Error", 
    JOptionPane.ERROR_MESSAGE);
```

**Sources:** [src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java L160](https://github.com/BrayanTirado/Servicio-Mec-nico/blob/b80161f0/src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java#L160-L160)

### Vehicle Not Found

When `servicioDAO.getVehiculoId()` returns `-1`, indicating the vehicle string does not match any database record:

```
JOptionPane.showMessageDialog(this, 
    "Vehículo no encontrado en la base de datos.", 
    "Error", 
    JOptionPane.ERROR_MESSAGE);
```

This scenario can occur if the vehicle was deleted from the database after the combo box was populated but before the search was executed.

**Sources:** [src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java L157](https://github.com/BrayanTirado/Servicio-Mec-nico/blob/b80161f0/src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java#L157-L157)

### SQLException Handling

SQL exceptions from `getServiciosByVehiculo()` are caught and logged using Java's logging framework [src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java L152-L153](https://github.com/BrayanTirado/Servicio-Mec-nico/blob/b80161f0/src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java#L152-L153)

 The exception is logged at `SEVERE` level but no user-facing error message is displayed, which may result in an empty table on database failures.

**Sources:** [src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java L149-L154](https://github.com/BrayanTirado/Servicio-Mec-nico/blob/b80161f0/src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java#L149-L154)

---

## UI Layout Structure

The form uses nested scroll panes for the table display [src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java L56-L57](https://github.com/BrayanTirado/Servicio-Mec-nico/blob/b80161f0/src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java#L56-L57)

 [src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java L93-L95](https://github.com/BrayanTirado/Servicio-Mec-nico/blob/b80161f0/src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java#L93-L95)

 This is likely a NetBeans Form Editor artifact.

```

```

**Diagram: UI component hierarchy showing nested scroll pane structure**

The panel uses GroupLayout with the following spacing [src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.form L48-L84](https://github.com/BrayanTirado/Servicio-Mec-nico/blob/b80161f0/src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.form#L48-L84)

:

* 25px left margin
* 81px top margin before controls
* 18-22px gap between controls and table
* 34px bottom margin

**Sources:** [src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java L97-L127](https://github.com/BrayanTirado/Servicio-Mec-nico/blob/b80161f0/src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java#L97-L127)

 [src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.form L47-L151](https://github.com/BrayanTirado/Servicio-Mec-nico/blob/b80161f0/src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.form#L47-L151)

---

## Integration with ServicioDAO

The `HistorialServicios` class depends on three `ServicioDAO` methods:

| Method | Purpose | Return Type | Error Condition |
| --- | --- | --- | --- |
| `getAllVehiculos()` | Load vehicle list for combo box | `List<String>` | Empty list if no vehicles |
| `getVehiculoId(String)` | Resolve vehicle name to ID | `int` | Returns `-1` if not found |
| `getServiciosByVehiculo(int)` | Fetch service history | `List<Servicio>` | Throws `SQLException` |

For details on DAO implementation, see [Database Layer](/BrayanTirado/Servicio-Mec-nico/3.2-database-layer).

**Sources:** [src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java L34-L36](https://github.com/BrayanTirado/Servicio-Mec-nico/blob/b80161f0/src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java#L34-L36)

 [src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java L147](https://github.com/BrayanTirado/Servicio-Mec-nico/blob/b80161f0/src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java#L147-L147)

 [src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java L151](https://github.com/BrayanTirado/Servicio-Mec-nico/blob/b80161f0/src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java#L151-L151)

---

## Servicio Domain Object

The table display relies on the `Servicio` class providing four getter methods [src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java L167-L172](https://github.com/BrayanTirado/Servicio-Mec-nico/blob/b80161f0/src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java#L167-L172)

:

* `getId()` - Service record ID
* `getFecha()` - Service date
* `getTipo()` - Service type/category
* `getCosto()` - Total service cost

For complete domain model documentation, see [Data Models and Domain Objects](/BrayanTirado/Servicio-Mec-nico/8-data-models-and-domain-objects).

**Sources:** [src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java L166-L173](https://github.com/BrayanTirado/Servicio-Mec-nico/blob/b80161f0/src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java#L166-L173)

---

## Design Characteristics

### Read-Only Interface

The `HistorialServicios` frame provides no editing capabilities. All interactions are query-based:

* Vehicle selection via combo box
* Search trigger via button click
* Results display in table

There are no save, update, or delete operations available from this interface.

### No Row Selection Handling

Unlike some other modules (e.g., `BuscarProducto` - see [Product Search Interface](/BrayanTirado/Servicio-Mec-nico/5.1-product-search-interface)), this frame does not implement row selection listeners or detail views. The table serves purely as a display component.

**Sources:** [src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java L1-L185](https://github.com/BrayanTirado/Servicio-Mec-nico/blob/b80161f0/src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java#L1-L185)

### Lazy Loading

Vehicle data is loaded once during initialization [src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java L36](https://github.com/BrayanTirado/Servicio-Mec-nico/blob/b80161f0/src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java#L36-L36)

 but service data is fetched only when the user initiates a search. This minimizes initial database load but means the combo box will not reflect vehicles added after the frame is opened.

**Sources:** [src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java L32-L44](https://github.com/BrayanTirado/Servicio-Mec-nico/blob/b80161f0/src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java#L32-L44)

---

## Comparison with Related Modules

| Feature | HistorialServicios | ConsultaVehiculo (see [#6.2](/BrayanTirado/Servicio-Mec-nico/6.2-vehicle-query-interface)) |
| --- | --- | --- |
| Selection Method | Combo box dropdown | Text search by license plate |
| Primary Display | Service history for one vehicle | Vehicle details + service history |
| Table Contents | Service records only | Multiple possible displays |
| Edit Capability | None (read-only) | None (read-only) |
| Refresh Strategy | Manual search button | Manual query button |

Both modules provide read-only views of service history but differ in their selection interface and primary focus. `HistorialServicios` emphasizes quick lookup across multiple vehicles, while `ConsultaVehiculo` combines vehicle information with service history.

**Sources:** [src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java L1-L185](https://github.com/BrayanTirado/Servicio-Mec-nico/blob/b80161f0/src/main/java/com/adso/el_taller_de_adso/servicios/HistorialServicios.java#L1-L185)